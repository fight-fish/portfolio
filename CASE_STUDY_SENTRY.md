# 通用目錄哨兵（Sentry Control System）案例研究

這是一個由我（人類）與 AI 協作完成的完整系統開發案例。  
它不是商業產品，而是一個技術實驗。  
但它證明了一件事：

> **即使沒有工程背景，只要方法正確，  
也能用 AI 實作出一個中型系統。**

以下是完整的案例拆解。

---

# 🟦 專案背景

我在 2025 年 9–10 月開始第一次接觸「AI 寫程式」。  
在此之前，我對程式的理解接近零。

我想要一個工具能：

- 監控不同資料夾  
- 自動記錄變動  
- 寫入專案的設定  
- 做成一個可以擴充的架構  
- 之後能接 GUI  
- 能加多個哨兵、做分類  
- 運作穩定（不能亂寫檔案、不能當掉）

於是我開始做「通用目錄哨兵」。

---

# 🟦 專案成果（以完成度呈現）

最終完成內容包含：

- 🧩 多層架構（Client / Engine / Worker / Daemon）
- 🧩 SmartThrottler（避免高頻寫入）
- 🧩 I/O 原子寫入（atomic_write）
- 🧩 完整的目錄監控流程
- 🧩 多哨兵管理（multi-sentry）
- 🧩 `projects.json` 資料模型（可擴充）
- 🧩 UI v1 架構設計（可視化準備中）
- 🧩 Regression Test（三個測試腳本，全數通過）
- 🧩 70+ 條真實開發日誌（時間順序完整）

我沒有寫過大型程式，  
但我靠「拆解 → debug → 測試 → AI 協作」把它做出來。

---

# 🟩 我在專案中的角色（我真正做的事）

我不負責寫程式碼本體，  
我負責的是：

### ✔ 拆解架構  
我把功能切成：

- I/O 層  
- 行為邏輯層  
- Daemon  
- Worker  
- Client  
- UI 層（準備）

讓 AI 能依照這個架構去生成程式碼，不會混在一起。

---

### ✔ 審查 AI 給的程式碼  
我會檢查：

- 是否符合需求  
- 功能是否對  
- 邏輯是否一致  
- 是否會導致路徑錯誤  
- 是否可能寫壞檔案  
- 是否埋下技術債  

很多錯誤是我自己找出來的。

---

### ✔ Debug & 反覆修正  
AI 常常：

- 寫錯路徑  
- 遺漏參數  
- 寫到錯的資料夾  
- I/O 不安全  
- 架構混亂  
- 行為不一致  
- 版本衝突  

我負責找原因，並要求 AI 逐步修正。

---

### ✔ 實際測試行為  
例如：

- 新增專案是否會寫入正確欄位  
- 名單是否正確記錄  
- 哨兵是否會偵測變動  
- SmartThrottler 是否正常  
- 寫入流程是否不會重複  
- regression/ 內的測試腳本是否全過  

我不只「看程式」，我會讓它真的跑起來。

---

# 🟧 開發日誌（Log）是這個專案最有代表性的部分

我一共留下了 **70 多條開發日誌**，  
內容包含：

- 每次新增功能  
- 每次修 bug  
- 每次重構  
- 每次做架構決策  
- 每個版本的調整  
- UI 架構的初稿  
- 技術債的紀錄  

這份日誌證明：

> 我不是靠運氣做出哨兵的，  
> 而是靠「大量 debug ＋ 拆解 ＋ 逐步完成」。

這是我能做到的最大價值。

---

# 🟨 我為什麼能做到？（個人能力）

不是因為我會程式，而是因為：

- 我會拆解混亂  
- 我能保持架構乾淨  
- 我不會讓 AI 亂跑  
- 我能正確 debug  
- 我能定義「什麼叫正確的行為」  
- 我能一步步讓 AI 修正  
- 我能管理一個專案的生命週期  

這些都是「協作能力」，不是技術能力。

---

# 🟦 範例：我做過的幾種關鍵修正

以下是我在專案中做的幾個具體技術決策（AI 不會自己做的）：

### 1）改寫 atomic_write，提高 I/O 安全性  
我要求：

- 先寫入暫存檔  
- fsync  
- 再以原子性 os.replace  
- 防止資料毀損  
- 測試完整流程  

### 2）分離 Engine / Worker  
避免混在一起  
讓 Worker 只負責監控  
Engine 處理行為  
Client 處理輸入  

### 3）正規化資料模型  
例如 `projects.json` 的 key、欄位、流程  
全部重寫成一致版本

### 4）大量修正錯誤路徑  
AI 在這部分錯超多，我全部 manually debug。

---

# 🟩 結語

這個哨兵不是產品，  
但它是我與 AI 合作能力的「證據」。

如果你需要：

- 協作  
- Debug  
- 半成品救火  
- 架構拆解  
- AI 實作陪跑  

這個案例就是我做得到的事情。
